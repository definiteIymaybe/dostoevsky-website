{"version":3,"sources":["webpack:///./src/components/charts/Bar/Bar.module.css","webpack:///./src/templates/ClauseChronologyPage/ClauseChronologyPage.module.css","webpack:///./src/components/charts/LineChart/index.ts","webpack:///./src/components/charts/LineChart/LineChart.tsx","webpack:///./src/templates/ClauseChronologyPage/components/charts/ChronologyConvictedDynamics/index.ts","webpack:///./src/templates/ClauseChronologyPage/components/charts/ChronologyConvictedDynamics/ChronologyConvictedDynamics.tsx","webpack:///./src/templates/ClauseChronologyPage/components/charts/ChronologyPunishmentDynamics/index.ts","webpack:///./src/templates/ClauseChronologyPage/components/charts/ChronologyPunishmentDynamics/ChronologyPunishmentDynamics.tsx","webpack:///./src/templates/ClauseChronologyPage/components/tables/ClauseChronologyByResultTable/index.ts","webpack:///./src/templates/ClauseChronologyPage/components/tables/ClauseChronologyByResultTable/ClauseChronologyByResultTable.tsx","webpack:///./src/templates/ClauseChronologyPage/components/tables/ClauseChronologyByPunishmentTable/index.ts","webpack:///./src/templates/ClauseChronologyPage/components/tables/ClauseChronologyByPunishmentTable/ClauseChronologyByPunishmentTable.tsx","webpack:///./src/templates/ClauseChronologyPage/ClauseChronologyPage.tsx","webpack:///./src/templates/ClauseChronologyPage/index.ts","webpack:///./src/page-templates/clause-chronology.tsx","webpack:///./src/components/charts/Bar/Bar.tsx","webpack:///./src/components/charts/Bar/Bar.container.tsx","webpack:///./src/components/charts/Bar/index.ts"],"names":["module","exports","LineChart","chartRef","React","createRef","styleHorizontalGrid","data","isGrid","isYGrid","element","attr","x1","getTooltipText","meta","value","metaDeserialized","JSON","parse","he","decode","e","console","error","lines","Object","entries","tooltip","lineKey","lineValue","push","replace","toString","label","join","componentDidMount","this","props","groups","labels","tooltipDescription","series","map","g","values","slice","v","i","plugins","window","require","Chartist","appendToBody","tooltipFnc","Line","current","reverse","axisX","showGrid","labelOffset","y","axisY","onlyInteger","scaleMinSpace","x","offset","fullWidth","labelInterpolationFnc","index","length","on","centerXLabel","styleVerticalGrid","render","wrapperProps","ChartWrapper","title","ref","style","height","PureComponent","ChronologyConvictedDynamics","clauseNumber","years","isIframeMode","useLocale","t","locale","year","downloadFilename","totalConvicted","iframePath","getClauseLink","undefined","ChronologyPunishmentDynamics","getTooltipDescription","charts","primaryImprisonment","primarySuspended","primaryCommunityService","primaryForcedLabour","primaryCorrectionalLabour","primaryFine","coerciveMeasures","primaryOther","Bar","areLabelsRotated","chartType","ClauseChronologyByResultTable","tables","columns","key","rows","totalAcquittal","dismissalAbsenceOfEvent","dismissalAmnesty","dismissalRepentance","dismissalReconciliation","dismissalCourtFine","dismissalOther","Table","isEqualWidth","isColored","isNotPaddedLeft","ClauseChronologyByPunishmentTable","ClauseChronologyPage","view","partsCount","ClausePageLayout","message","pageType","hasParts","className","cn","classes","Helmet","defer","name","content","chartContainer","scope","chartContainerFullWidth","tableContainer","withLocale","ClauseChronology","pageContext","location","accumulateNodes","edges","p","parameters","sort","p1","p2","Layout","hasPageLayout","Meta","site","clauseId","parts","getLabels","getBarSum","seriesLength","type","seriesIndex","foreignObject","document","createElementNS","setAttribute","x2","String","y2","div","createElement","innerHTML","sum","appendChild","_node","parentElement","chartRefs","reduce","a","c","chartLabels","stackBars","horizontalBars","stretch","chartPadding","right","bottom","removeHorizontalGridExceptLast","maxLabelsCount","wrapperHeight","isFullWidth","width","Typography","chartTitle","isUpperCased","fromCharCode","barPartsByPunishment","BarContainer","areLabelsFiltered","otherProps","forbiddenChartsIndexes","forEach","chart","chartI","filteredLabels","forbiddenLabelsIndexes","find","keys","filterOutForbiddenIndexes","hasOwnProperty","filter","filteredGroups","filteredCharts"],"mappings":"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","file":"component---src-page-templates-clause-chronology-tsx-289911d71048af2c34d7.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"chartTitle\":\"Bar-module--chart-title--3qQKi\",\"areLabelsRotated\":\"Bar-module--are-labels-rotated--1wm8w\",\"barPartsByPunishment\":\"Bar-module--bar-parts-by-punishment--3mpOw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"charts\":\"ClauseChronologyPage-module--charts--2x2Kg\",\"chartContainer\":\"ClauseChronologyPage-module--chart-container--1Pcpr\",\"chartContainerFullWidth\":\"ClauseChronologyPage-module--chart-container-full-width--2G_K3\",\"tableContainer\":\"ClauseChronologyPage-module--table-container--AfJa3\"};","import LineChart from \"./LineChart\";\nexport default LineChart;\n","import React, { PureComponent } from \"react\";\nimport ChartWrapper from \"src/components/ChartWrapper\";\nimport Chartist, { IChartistStepAxis, ChartDrawData } from \"chartist\";\nimport he from \"he\";\nimport {\n  centerXLabel,\n  styleVerticalGrid,\n  isGrid,\n  isYGrid,\n} from \"src/utils/chartist\";\n\ninterface LineChartProps extends React.ComponentProps<typeof ChartWrapper> {\n  groups: {\n    values: number[];\n    title: string;\n  }[];\n  tooltipDescription: {\n    [key: string]: string;\n  };\n  labels: string[];\n}\n\nconst Y_LABEL_MARGIN = 15;\n\nclass LineChart extends PureComponent<LineChartProps> {\n  private chartRef = React.createRef<HTMLDivElement>();\n\n  public componentDidMount(): void {\n    const { groups, labels, tooltipDescription } = this.props;\n\n    const series: { value: number }[][] = groups.map((g) =>\n      g.values.slice().map((v, i) => ({\n        value: v,\n        meta: { tooltip: tooltipDescription, label: labels[i] },\n      }))\n    );\n\n    const plugins = [];\n\n    if (typeof window !== `undefined`) {\n      require(\"chartist-plugin-tooltips\");\n      plugins.push(\n        Chartist.plugins.tooltip({\n          appendToBody: true,\n          tooltipFnc: this.getTooltipText,\n        })\n      );\n    }\n\n    const chart = new Chartist.Line(\n      this.chartRef.current,\n      {\n        labels: labels,\n        series: series.slice().reverse(),\n      },\n      {\n        axisX: {\n          showGrid: true,\n          labelOffset: {\n            y: Y_LABEL_MARGIN,\n          },\n        },\n        axisY: {\n          showGrid: true,\n          onlyInteger: true,\n          scaleMinSpace: 40,\n          labelOffset: {\n            y: 6,\n            x: -4,\n          },\n          offset: 35,\n        } as IChartistStepAxis,\n        fullWidth: true,\n        plugins,\n      },\n      [\n        [\n          \"screen and (max-width: 640px)\",\n          {\n            axisX: {\n              labelInterpolationFnc: function (value: string, index: number) {\n                if (index === labels.length - 1) {\n                  return value;\n                }\n                return index % 2 === 0 ? value : null;\n              },\n            },\n          },\n        ],\n      ]\n    );\n\n    chart.on(\"draw\", (data: ChartDrawData) => {\n      centerXLabel(data);\n      styleVerticalGrid(data, Y_LABEL_MARGIN, true);\n      this.styleHorizontalGrid(data);\n    });\n  }\n\n  render(): React.ReactNode {\n    const { groups, ...wrapperProps } = this.props;\n\n    return (\n      <ChartWrapper {...wrapperProps} labels={groups.map((g) => g.title)}>\n        <div ref={this.chartRef} style={{ height: 500 }}></div>\n      </ChartWrapper>\n    );\n  }\n\n  /** Function to show horizontal grid a little left */\n  private styleHorizontalGrid = (data: ChartDrawData): void => {\n    if (!isGrid(data) || !isYGrid(data)) {\n      return;\n    }\n    data.element.attr({\n      x1: data.x1 - 5,\n    });\n  };\n\n  private getTooltipText = (meta: string, value: number) => {\n    let metaDeserialized: {\n      data: {\n        tooltip: {\n          [key: string]: string;\n        };\n        label: string;\n      };\n    };\n    try {\n      metaDeserialized = JSON.parse(he.decode(meta));\n    } catch (e) {\n      console.error(e);\n      return '<span class=\"chartist-tooltip-meta\">Error</span>';\n    }\n    const lines = [];\n    for (const [lineKey, lineValue] of Object.entries(\n      metaDeserialized.data.tooltip\n    )) {\n      lines.push(\n        `${lineKey}: ${lineValue\n          .replace(\"%%\", value.toString())\n          .replace(\"%label%\", metaDeserialized.data.label)}`\n      );\n    }\n    return `<span class=\"chartist-tooltip-meta\">${lines.join(\"<br>\")}</span>`;\n  };\n}\n\nexport default LineChart;\n","import ChronologyConvictedDynamics from \"./ChronologyConvictedDynamics\";\nexport default ChronologyConvictedDynamics;\n","import React from \"react\";\nimport LineChart from \"src/components/charts/LineChart\";\nimport { getClauseLink } from \"src/config/routes\";\nimport { T, useLocale } from \"react-targem\";\n\ninterface ChronologyConvictedDynamicsProps {\n  isIframeMode?: boolean;\n  clauseNumber: number;\n  years: {\n    year: number;\n    totalConvicted: number; // Всего осуждено\n  }[];\n}\n\nconst ChronologyConvictedDynamics: React.SFC<ChronologyConvictedDynamicsProps> = (\n  props: ChronologyConvictedDynamicsProps\n) => {\n  const { clauseNumber, years, isIframeMode } = props;\n  const { t, locale } = useLocale();\n\n  return (\n    <LineChart\n      isIframeMode={isIframeMode}\n      title={t(\"Динамика числа осужденных по основному составу\")}\n      labels={years.map((y) => y.year.toString())}\n      downloadFilename={`${clauseNumber}-convicted-dynamics`}\n      tooltipDescription={{\n        [t(\"Состав\")]: t(\"{{ clauseNumber }} Основной состав\", {\n          clauseNumber,\n        }),\n        [t(\"Год\")]: \"%label%\",\n        [t(\"Число человек\")]: \"%%\",\n      }}\n      groups={[\n        {\n          title: t(\"{{ clauseNumber }} Основной состав\", { clauseNumber }),\n          values: years.map((y) => y.totalConvicted),\n        },\n      ]}\n      iframePath={getClauseLink(\n        locale,\n        clauseNumber.toString(),\n        undefined,\n        \"chronology\",\n        \"iframe-convicted-dynamics\"\n      )}\n    />\n  );\n};\n\nexport default ChronologyConvictedDynamics;\n","import ChronologyPunishmentDynamics from \"./ChronologyPunishmentDynamics\";\nexport default ChronologyPunishmentDynamics;\n","import React from \"react\";\nimport Bar from \"src/components/charts/Bar\";\nimport { getClauseLink } from \"src/config/routes\";\nimport { T, useLocale } from \"react-targem\";\nimport years from \"content/years.json\";\ninterface ChronologyConvictedDynamicsProps {\n  isIframeMode?: boolean;\n  clauseNumber: number;\n  years: {\n    year: number;\n\n    primaryImprisonment: number; // Лишение свободы\n    primarySuspended: number; // Условное осуждение к лишению свободы\n    primaryCommunityService: number; // Обязательные работы\n    primaryForcedLabour: number; // Принудительные работы\n    primaryCorrectionalLabour: number; // Исправительные работы\n    primaryFine: number; // Штраф\n    coerciveMeasures: number; // Принудительные меры к невменяемым\n    primaryOther: number; // Условное осуждение к иным мерам\n  }[];\n}\n\nconst ChronologyConvictedDynamics: React.SFC<ChronologyConvictedDynamicsProps> = (\n  props: ChronologyConvictedDynamicsProps\n) => {\n  const { clauseNumber, years, isIframeMode } = props;\n  const { t, locale } = useLocale();\n\n  const getTooltipDescription = (title: string) => ({\n    [t(\"Состав\")]: \"Основной состав\",\n    [t(\"Наказание\")]: title,\n    [t(\"Число человек\")]: \"%%\",\n  });\n\n  const labels = years.map((y) => y.year.toString());\n\n  const charts = [\n    {\n      groups: [\n        {\n          title: t(\"Основной состав\"),\n          values: years.map((y) => y.primaryImprisonment),\n        },\n      ],\n      title: t(\"Лишение свободы\"),\n      labels,\n      tooltipDescription: getTooltipDescription(t(\"Лишение свободы\")),\n    },\n    {\n      groups: [\n        {\n          title: t(\"Основной состав\"),\n          values: years.map((y) => y.primarySuspended),\n        },\n      ],\n      labels,\n      title: t(\"условное осуждение к лишению свободы\"),\n      tooltipDescription: getTooltipDescription(\n        t(\"условное осуждение к лишению свободы\")\n      ),\n    },\n    {\n      groups: [\n        {\n          title: t(\"Основной состав\"),\n          values: years.map((y) => y.primaryCommunityService),\n        },\n      ],\n      labels,\n      title: t(\"обязательные работы\"),\n      tooltipDescription: getTooltipDescription(t(\"обязательные работы\")),\n    },\n    {\n      groups: [\n        {\n          title: t(\"Основной состав\"),\n          values: years.map((y) => y.primaryForcedLabour),\n        },\n      ],\n      labels,\n      title: t(\"принудительные работы\"),\n      tooltipDescription: getTooltipDescription(t(\"принудительные работы\")),\n    },\n    {\n      groups: [\n        {\n          title: t(\"Основной состав\"),\n          values: years.map((y) => y.primaryCorrectionalLabour),\n        },\n      ],\n      labels,\n      title: t(\"исправительные работы\"),\n      tooltipDescription: getTooltipDescription(t(\"исправительные работы\")),\n    },\n    {\n      groups: [\n        {\n          title: t(\"Основной состав\"),\n          values: years.map((y) => y.primaryFine),\n        },\n      ],\n      labels,\n      title: t(\"штраф\"),\n      tooltipDescription: getTooltipDescription(t(\"штраф\")),\n    },\n    {\n      groups: [\n        {\n          title: t(\"Основной состав\"),\n          values: years.map((y) => y.coerciveMeasures),\n        },\n      ],\n      labels,\n      title: t(\"Принудительные меры к невменяемым\"),\n      tooltipDescription: getTooltipDescription(\n        t(\"Принудительные меры к невменяемым\")\n      ),\n    },\n    {\n      groups: [\n        {\n          title: t(\"Основной состав\"),\n          values: years.map((y) => y.primaryOther),\n        },\n      ],\n      labels,\n      title: t(\"условное осуждение к иным мерам\"),\n      tooltipDescription: getTooltipDescription(\n        t(\"условное осуждение к иным мерам\")\n      ),\n    },\n  ];\n\n  return (\n    <Bar\n      isIframeMode={isIframeMode}\n      title={t(\"Динамика наказаний по статье с 2009 по {{ year }} гг.\", {\n        year: `${years[0]}`,\n      })}\n      downloadFilename={`${clauseNumber}-punishment-dynamics`}\n      charts={charts}\n      areLabelsRotated\n      chartType=\"dynamicsPunishment\"\n      iframePath={getClauseLink(\n        locale,\n        clauseNumber.toString(),\n        undefined,\n        \"chronology\",\n        \"iframe-punishment-dynamics\"\n      )}\n    />\n  );\n};\n\nexport default ChronologyConvictedDynamics;\n","import ClauseChronologyByResultTable from \"./ClauseChronologyByResultTable\";\nexport default ClauseChronologyByResultTable;\n","import React from \"react\";\nimport Table from \"src/components/Table\";\nimport { useLocale, T } from \"react-targem\";\nimport { getClauseLink } from \"src/config/routes\";\n\ninterface Year {\n  year: number;\n  totalConvicted: number; // Всего осуждено\n\n  totalAcquittal: number; // Оправдано\n  dismissalAbsenceOfEvent: number; // Прекращено за отсутствием события, состава, непричастностью к преступлению\n  dismissalAmnesty: number; // Прекращено по амнистии\n  dismissalRepentance: number; // Прекращено в связи с деятельным раскаянием\n  dismissalReconciliation: number; // Прекращено за примирением с потерпевшим\n  dismissalCourtFine: number; // Прекращено судебный штраф\n  dismissalOther: number; // Прекращено по другим основаниям\n  coerciveMeasures: number; // Принудительные меры к невменяемым\n}\n\ninterface ClauseChronologyByResultProps {\n  clauseNumber: number;\n  years: Year[];\n}\n\nconst ClauseChronologyByResultTable: React.FC<ClauseChronologyByResultProps> = ({\n  clauseNumber,\n  years,\n}: ClauseChronologyByResultProps) => {\n  const { t, locale } = useLocale();\n\n  const tables = [\n    {\n      title: t(\"Все года\"),\n      columns: [\n        { title: t(\"Год\"), key: \"1\" },\n        { title: t(\"Всего осуждено\"), key: \"2\" },\n        { title: t(\"Оправдано\"), key: \"3\" },\n        {\n          title: t(\n            \"Прекращено за отсутствием события, состава, непричастности к преступлению\"\n          ),\n          key: \"4\",\n        },\n        { title: t(\"Прекращено по амнистии\"), key: \"5\" },\n        { title: t(\"Прекращено в связи с деятельным раскаянием\"), key: \"6\" },\n        { title: t(\"Прекращено за примирением\"), key: \"7\" },\n        { title: t(\"Судебный штраф\"), key: \"8\" },\n        { title: t(\"Прекращено по другим основаниям\"), key: \"9\" },\n        { title: t(\"Принудительные меры к невменяемым\"), key: \"10\" },\n      ],\n      rows: years.map((y) => ({\n        key: y.year.toString(),\n        values: [\n          { key: \"1\", value: y.year },\n          { key: \"2\", value: y.totalConvicted },\n          { key: \"3\", value: y.totalAcquittal },\n          { key: \"4\", value: y.dismissalAbsenceOfEvent },\n          { key: \"5\", value: y.dismissalAmnesty },\n          { key: \"6\", value: y.dismissalRepentance },\n          { key: \"7\", value: y.dismissalReconciliation },\n          { key: \"8\", value: y.dismissalCourtFine },\n          { key: \"9\", value: y.dismissalOther },\n          { key: \"10\", value: y.coerciveMeasures },\n        ],\n      })),\n    },\n  ];\n\n  return (\n    <Table\n      isEqualWidth\n      isColored\n      title={t(\n        \"Динамика числа осужденных по основному составу. Основные параметры.\"\n      )}\n      downloadFilename={`${clauseNumber}-chronology-by-result`}\n      iframePath={getClauseLink(\n        locale,\n        clauseNumber,\n        undefined,\n        \"parts\",\n        \"iframe-table-chronology-by-result\"\n      )}\n      isNotPaddedLeft\n      tables={tables}\n    />\n  );\n};\n\nexport default ClauseChronologyByResultTable;\n","import ClauseChronologyByPunishmentTable from \"./ClauseChronologyByPunishmentTable\";\nexport default ClauseChronologyByPunishmentTable;\n","import React from \"react\";\nimport Table from \"src/components/Table\";\nimport { useLocale, T } from \"react-targem\";\nimport { getClauseLink } from \"src/config/routes\";\nimport { CountersByPunishment } from \"src/types\";\n\ninterface Year extends CountersByPunishment {\n  year: number;\n  totalConvicted: number; // Всего осуждено\n}\n\ninterface ClauseChronologyByPunishmentTableProps {\n  clauseNumber: number;\n  years: Year[];\n}\n\nconst ClauseChronologyByPunishmentTable: React.FC<ClauseChronologyByPunishmentTableProps> = ({\n  clauseNumber,\n  years,\n}: ClauseChronologyByPunishmentTableProps) => {\n  const { t, locale } = useLocale();\n\n  const tables = [\n    {\n      title: t(\"Все года\"),\n      columns: [\n        { title: t(\"Год\"), key: \"1\" },\n        { title: t(\"Лишение свободы\"), key: \"2\" },\n        { title: t(\"Условно к лишению свободы\"), key: \"3\" },\n        { title: t(\"Обязательные работы\"), key: \"4\" },\n        {\n          title: t(\"Принудительные работы\"),\n          key: \"5\",\n        },\n        { title: t(\"Исправительные работы\"), key: \"6\" },\n        { title: t(\"Штраф\"), key: \"7\" },\n        { title: t(\"Принудительные меры к невменяемым\"), key: \"8\" },\n        { title: t(\"Условное к иным мерам\"), key: \"9\" },\n      ],\n      rows: years.map((y) => ({\n        key: y.year.toString(),\n        values: [\n          { key: \"1\", value: y.year },\n          { key: \"2\", value: y.primaryImprisonment },\n          { key: \"3\", value: y.primarySuspended },\n          { key: \"4\", value: y.primaryCommunityService },\n          { key: \"5\", value: y.primaryForcedLabour },\n          { key: \"6\", value: y.primaryCorrectionalLabour },\n          { key: \"7\", value: y.primaryFine },\n          { key: \"8\", value: y.coerciveMeasures },\n          { key: \"9\", value: y.primaryOther },\n        ],\n      })),\n    },\n  ];\n\n  return (\n    <Table\n      isEqualWidth\n      isColored\n      title={t(\"Наказания по статье\")}\n      downloadFilename={`${clauseNumber}-chronology-by-punishment`}\n      iframePath={getClauseLink(\n        locale,\n        clauseNumber,\n        undefined,\n        \"parts\",\n        \"iframe-table-chronology-by-punishment\"\n      )}\n      isNotPaddedLeft\n      tables={tables}\n    />\n  );\n};\n\nexport default ClauseChronologyByPunishmentTable;\n","import React, { PureComponent } from \"react\";\nimport ClausePageLayout from \"src/components/ClausePageLayout\";\nimport classes from \"./ClauseChronologyPage.module.css\";\nimport cn from \"clsx\";\nimport ChronologyConvictedDynamics from \"./components/charts/ChronologyConvictedDynamics\";\nimport ChronologyPunishmentDynamics from \"./components/charts/ChronologyPunishmentDynamics\";\nimport ClauseChronologyByResultTable from \"./components/tables/ClauseChronologyByResultTable\";\nimport ClauseChronologyByPunishmentTable from \"./components/tables/ClauseChronologyByPunishmentTable\";\nimport { T, withLocale, WithLocale } from \"react-targem\";\nimport { Helmet } from \"react-helmet\";\nimport years from \"content/years.json\";\n\nexport type ClauseChronologyPageViewMode =\n  | \"page\"\n  | \"table\"\n  | \"iframe-convicted-dynamics\"\n  | \"iframe-punishment-dynamics\"\n  | \"iframe-table-chronology-by-result\"\n  | \"iframe-table-chronology-by-punishment\";\n\ninterface Year {\n  year: number;\n  totalConvicted: number; // Всего осуждено\n\n  primaryImprisonment: number; // Лишение свободы\n  primarySuspended: number; // Условное осуждение к лишению свободы\n  primaryCommunityService: number; // Обязательные работы\n  primaryForcedLabour: number; // Принудительные работы\n  primaryCorrectionalLabour: number; // Исправительные работы\n  primaryFine: number; // Штраф\n  coerciveMeasures: number; // Принудительные меры к невменяемым\n  primaryOther: number; // Условное осуждение к иным мерам\n\n  totalAcquittal: number; // Оправдано\n  dismissalAbsenceOfEvent: number; // Прекращено за отсутствием события, состава, непричастностью к преступлению\n  dismissalAmnesty: number; // Прекращено по амнистии\n  dismissalRepentance: number; // Прекращено в связи с деятельным раскаянием\n  dismissalReconciliation: number; // Прекращено за примирением с потерпевшим\n  dismissalCourtFine: number; // Прекращено судебный штраф\n  dismissalOther: number; // Прекращено по другим основаниям\n}\n\nexport interface ClauseChronologyPageProps extends WithLocale {\n  clauseNumber: number;\n  view: ClauseChronologyPageViewMode;\n  partsCount: number;\n  years: Year[];\n}\n\nclass ClauseChronologyPage extends PureComponent<ClauseChronologyPageProps> {\n  render(): React.ReactNode {\n    const { clauseNumber, view, partsCount, t } = this.props;\n\n    if (view === \"iframe-convicted-dynamics\") {\n      return <ChronologyConvictedDynamics {...this.props} isIframeMode />;\n    }\n\n    if (view === \"iframe-punishment-dynamics\") {\n      return <ChronologyPunishmentDynamics {...this.props} isIframeMode />;\n    }\n\n    return (\n      <ClausePageLayout\n        clauseNumber={clauseNumber}\n        title={<T message=\"Хронология\" />}\n        pageType=\"chronology\"\n        hasParts={partsCount > 1}\n      >\n        {view === \"page\" ? (\n          <div className={cn(classes.charts)}>\n            <Helmet defer={false}>\n              <title>\n                {`${t(\"Статья\")} ${clauseNumber} | ${t(\"Хронология\")} | ${t(\n                  \"Чарты\"\n                )}`}\n              </title>\n              <meta\n                name=\"description\"\n                content={t(\n                  \"На этой странице мы сравнили ключевые показатели по статье за период с 2009 по {{ year }} годы. Полноценных данных до 2009 года в открытом доступе не существует: Судебный департамент Верховного суда начал публиковать сводную статистику по рассмотрению судами уголовных дел после появления соответствующего закона и регламента в 2008 году.\",\n                  {\n                    year: `${years[0]}`,\n                  }\n                )}\n              />\n            </Helmet>\n            <div className={cn(classes.chartContainer)}>\n              <T\n                message=\"На этой странице мы сравнили ключевые показатели по статье за период с 2009 по {{ year }} годы. Полноценных данных до 2009 года в открытом доступе не существует: Судебный департамент Верховного суда начал публиковать сводную статистику по рассмотрению судами уголовных дел после появления соответствующего закона и регламента в 2008 году.\"\n                scope={{\n                  year: `${years[0]}`,\n                }}\n              />\n            </div>\n            <div className={cn(classes.chartContainer)}>\n              <ChronologyConvictedDynamics {...this.props} />\n            </div>\n            <div\n              className={cn(\n                classes.chartContainer,\n                classes.chartContainerFullWidth\n              )}\n            >\n              <ChronologyPunishmentDynamics {...this.props} />\n            </div>\n          </div>\n        ) : null}\n        {view === \"table\" ? (\n          <>\n            <Helmet defer={false}>\n              <title>\n                {`${t(\"Статья\")} ${clauseNumber} | ${t(\"Хронология\")} | ${t(\n                  \"Таблица\"\n                )}`}\n              </title>\n              <meta\n                name=\"description\"\n                content={t(\n                  \"На этой странице мы сравнили ключевые показатели по статье за период с 2009 по {{ year }} годы. Полноценных данных до 2009 года в открытом доступе не существует: Судебный департамент Верховного суда начал публиковать сводную статистику по рассмотрению судами уголовных дел после появления соответствующего закона и регламента в 2008 году.\",\n                  {\n                    year: `${years[0]}`,\n                  }\n                )}\n              />\n            </Helmet>\n            <div className={cn(classes.tableContainer)}>\n              <ClauseChronologyByResultTable {...this.props} />\n            </div>\n            <div className={cn(classes.tableContainer)}>\n              <ClauseChronologyByPunishmentTable {...this.props} />\n            </div>\n          </>\n        ) : null}\n      </ClausePageLayout>\n    );\n  }\n}\n\nexport default withLocale(ClauseChronologyPage);\n","import ClauseChronologyPage from \"./ClauseChronologyPage\";\nexport default ClauseChronologyPage;\nexport type { ClauseChronologyPageViewMode } from \"./ClauseChronologyPage\";\n","import React, { PureComponent } from \"react\";\nimport { graphql } from \"gatsby\";\nimport { ClauseChronologyQuery } from \"types/graphql-types\";\nimport ClauseChronologyPage, {\n  ClauseChronologyPageViewMode,\n} from \"src/templates/ClauseChronologyPage\";\nimport Meta from \"src/components/Meta\";\nimport Layout from \"src/components/Layout\";\nimport { accumulateNodes, NoUndefinedField } from \"src/utils/objects\";\n\ninterface ClauseChronologyProps {\n  data: ClauseChronologyQuery;\n  location: Location;\n  pageContext: {\n    partRegex: string;\n    year: string;\n    clauseId: number;\n    view: ClauseChronologyPageViewMode;\n  };\n}\n\nclass ClauseChronology extends PureComponent<ClauseChronologyProps> {\n  render(): React.ReactNode {\n    const { data, pageContext, location } = this.props;\n    const years = accumulateNodes<\n      ClauseChronologyQuery[\"years\"][\"edges\"][number][\"node\"],\n      ClauseChronologyQuery[\"years\"][\"edges\"][number]\n    >(data.years.edges, \"year\", [\"part\"])\n      .map((p) => {\n        const parameters = p.parameters as NoUndefinedField<\n          typeof p.parameters\n        >;\n        return {\n          ...p,\n          ...parameters,\n        };\n      })\n      .sort((p1, p2) => p1.year - p2.year);\n\n    return (\n      <Layout\n        location={location}\n        hasPageLayout={\n          pageContext.view === \"page\" || pageContext.view === \"table\"\n        }\n      >\n        <Meta site={data.site?.meta} />\n        <ClauseChronologyPage\n          view={pageContext.view}\n          clauseNumber={pageContext.clauseId}\n          partsCount={data.parts.edges.length}\n          years={years}\n        />\n      </Layout>\n    );\n  }\n}\n\nexport const query = graphql`\n  query ClauseChronology(\n    $partRegex: String!\n    $clauseRegex: String!\n    $lastYear: Int!\n  ) {\n    site {\n      meta: siteMetadata {\n        title\n        description\n        siteUrl\n      }\n    }\n    parts: allApiServerData(\n      filter: { part: { regex: $partRegex }, year: { eq: $lastYear } }\n    ) {\n      edges {\n        node {\n          part\n        }\n      }\n    }\n    years: allApiServerData(filter: { part: { regex: $clauseRegex } }) {\n      edges {\n        node {\n          year\n          part\n          parameters {\n            totalConvicted\n            primaryImprisonment\n            primarySuspended\n            primaryCommunityService\n            primaryForcedLabour\n            primaryCorrectionalLabour\n            primaryFine\n            coerciveMeasures\n            primaryOther\n            totalAcquittal: acquittal\n            dismissalAbsenceOfEvent\n            dismissalAmnesty\n            dismissalRepentance\n            dismissalReconciliation\n            dismissalCourtFine\n            dismissalOther\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport default ClauseChronology;\n","import React, { PureComponent } from \"react\";\nimport ChartWrapper from \"src/components/ChartWrapper\";\nimport Chartist, { IChartistStepAxis, ChartDrawData } from \"chartist\";\nimport classes from \"./Bar.module.css\";\nimport cn from \"clsx\";\nimport he from \"he\";\nimport Typography from \"src/components/ui-kit/Typography\";\nimport {\n  centerXLabel,\n  styleVerticalGrid,\n  removeHorizontalGridExceptLast,\n} from \"src/utils/chartist\";\n\ninterface BarProps extends React.ComponentProps<typeof ChartWrapper> {\n  charts: {\n    groups: {\n      values: number[];\n      title: string;\n    }[];\n    title?: React.ReactNode;\n    tooltipDescription: {\n      [key: string]: string;\n    };\n    labels: string[];\n  }[];\n  maxLabelsCount: number;\n  areLabelsRotated?: boolean;\n  isIframeMode?: boolean;\n  chartType: \"partsByPunishment\" | \"dynamicsPunishment\";\n}\n\nconst ROW_HEIGHT = 50;\nconst Y_LABEL_MARGIN = 15;\n\nclass Bar extends PureComponent<BarProps> {\n  private chartRefs: React.RefObject<HTMLDivElement>[];\n\n  public constructor(props: BarProps) {\n    super(props);\n    this.chartRefs = [];\n    for (let i = 0; i < props.charts.length; i++) {\n      this.chartRefs[i] = React.createRef<HTMLDivElement>();\n    }\n  }\n\n  public componentDidMount(): void {\n    const { charts, areLabelsRotated, chartType } = this.props;\n    for (let i = 0; i < charts.length; i++) {\n      const { groups, tooltipDescription, labels } = charts[i];\n\n      const series: { value: number }[][] = groups.map((g) =>\n        g.values\n          .slice()\n          .map((v, i) => ({\n            value: v,\n            meta: {\n              tooltip: tooltipDescription,\n              sum:\n                chartType === \"partsByPunishment\"\n                  ? groups.reduce((a, c) => {\n                      a += c.values[i];\n                      return a;\n                    }, 0)\n                  : null,\n            },\n          }))\n          .reverse()\n      );\n\n      const chartLabels: string[] = labels.slice().reverse();\n\n      const plugins = [];\n\n      if (typeof window !== `undefined`) {\n        require(\"chartist-plugin-tooltips\");\n        plugins.push(\n          Chartist.plugins.tooltip({\n            appendToBody: true,\n            tooltipFnc: this.getTooltipText,\n          })\n        );\n      }\n\n      const chart = new Chartist.Bar(\n        this.chartRefs[i].current,\n        {\n          labels: chartLabels,\n          series,\n        },\n        {\n          stackBars: true,\n          horizontalBars: true,\n          axisX: {\n            onlyInteger: true,\n            showGrid: true,\n            labelOffset: {\n              y: areLabelsRotated ? 10 : 15,\n            },\n          },\n          axisY: {\n            stretch: true,\n            showGrid: true,\n            labelOffset: {\n              x: 0,\n              y: -20,\n            },\n            offset: 0,\n            fullWidth: true,\n          } as IChartistStepAxis,\n          chartPadding: {\n            right: chartType === \"partsByPunishment\" ? 50 : 0,\n            bottom: areLabelsRotated ? 20 : 0,\n          },\n          plugins,\n        }\n      );\n\n      chart.on(\"draw\", (data: ChartDrawData) => {\n        centerXLabel(data, areLabelsRotated);\n        styleVerticalGrid(data, Y_LABEL_MARGIN);\n        removeHorizontalGridExceptLast(data);\n        if (chartType === \"partsByPunishment\") {\n          this.getBarSum(data, series.length);\n        }\n      });\n    }\n  }\n\n  render(): React.ReactNode {\n    const {\n      charts,\n      areLabelsRotated,\n      maxLabelsCount,\n      chartType,\n      ...wrapperProps\n    } = this.props;\n\n    const wrapperHeight =\n      chartType === \"partsByPunishment\" && charts.length\n        ? 60 * charts[0].labels.length + 50\n        : maxLabelsCount * ROW_HEIGHT;\n\n    return (\n      <ChartWrapper {...wrapperProps} labels={this.getLabels()} isFullWidth>\n        {charts.map((c, i) => (\n          <div key={i} style={{ width: `${100 / charts.length}%` }}>\n            {chartType !== \"partsByPunishment\" ? (\n              <Typography className={cn(classes.chartTitle)} isUpperCased>\n                <b>\n                  <small>{c.title}</small>\n                </b>\n              </Typography>\n            ) : null}\n            <div\n              ref={this.chartRefs[i]}\n              className={cn({\n                [`ct-chart-${String.fromCharCode(97 + i)}`]: charts.length > 1,\n                [classes.areLabelsRotated]: areLabelsRotated,\n                [classes.barPartsByPunishment]:\n                  chartType === \"partsByPunishment\",\n              })}\n              style={{\n                height: wrapperHeight,\n              }}\n            ></div>\n          </div>\n        ))}\n      </ChartWrapper>\n    );\n  }\n\n  private getLabels = () => {\n    const { charts } = this.props;\n    if (charts.length === 1) {\n      return charts[0].groups.map((g) => g.title);\n    }\n    return undefined;\n  };\n\n  private getTooltipText = (meta: string, value: number) => {\n    let metaDeserialized: {\n      data: {\n        tooltip: {\n          [key: string]: string;\n        };\n      };\n    };\n    try {\n      metaDeserialized = JSON.parse(he.decode(meta));\n    } catch (e) {\n      console.error(e);\n      return '<span class=\"chartist-tooltip-meta\">Error</span>';\n    }\n    const lines = [];\n    for (const [lineKey, lineValue] of Object.entries(\n      metaDeserialized.data.tooltip\n    )) {\n      lines.push(`${lineKey}: ${lineValue.replace(\"%%\", value.toString())}`);\n    }\n    return `<span class=\"chartist-tooltip-meta\">${lines.join(\"<br>\")}</span>`;\n  };\n\n  private getBarSum = (data: ChartDrawData, seriesLength: number) => {\n    if (data.type === \"bar\" && data.seriesIndex === seriesLength - 1) {\n      const foreignObject = document.createElementNS(\n        \"http://www.w3.org/2000/svg\",\n        \"foreignObject\"\n      );\n      foreignObject.setAttribute(\"x\", data.x2 + 7);\n      foreignObject.setAttribute(\"y\", String(data.y2 - 12));\n      foreignObject.setAttribute(\"width\", \"100\");\n      foreignObject.setAttribute(\"height\", \"100\");\n\n      const div = document.createElement(\"span\");\n      div.innerHTML = data.meta.sum;\n      div.setAttribute(\"class\", \"ct-bar-sum\");\n\n      foreignObject.appendChild(div);\n      data.element._node.parentElement.appendChild(foreignObject);\n    }\n  };\n}\n\nexport default Bar;\n","import React, { PureComponent } from \"react\";\nimport Bar from \"./Bar\";\n\ninterface BarContainerProps\n  extends Omit<React.ComponentProps<typeof Bar>, \"maxLabelsCount\"> {\n  areLabelsFiltered?: boolean;\n}\ninterface BarContainerState {}\n\nclass BarContainer extends PureComponent<BarContainerProps, BarContainerState> {\n  render(): React.ReactNode {\n    const { charts, areLabelsFiltered, ...otherProps } = this.props;\n    const maxLabelsCount = charts[0].labels.length;\n    const forbiddenChartsIndexes: { [key: number]: boolean } = {};\n    charts.forEach((chart, chartI) => {\n      let filteredLabels = [...chart.labels];\n      const forbiddenLabelsIndexes: { [key: number]: boolean } = {};\n      const { groups } = chart;\n\n      groups[0].values.forEach((v: number, i: number) => {\n        if (v !== 0 && v !== null) {\n          return;\n        }\n        const notEmptyGroupWithSameLabel = groups.find(\n          (g) => g.values[i] !== 0 && g.values[i] !== null\n        );\n        if (notEmptyGroupWithSameLabel) {\n          return;\n        }\n        forbiddenLabelsIndexes[i] = true;\n      });\n\n      if (Object.keys(forbiddenLabelsIndexes).length === 0) {\n        return (\n          <Bar\n            maxLabelsCount={maxLabelsCount}\n            charts={charts}\n            {...otherProps}\n          />\n        );\n      }\n\n      if (\n        Object.keys(forbiddenLabelsIndexes).length === groups[0].values.length\n      ) {\n        forbiddenChartsIndexes[chartI] = true;\n        return;\n      }\n      if (!areLabelsFiltered) {\n        return;\n      }\n      const filterOutForbiddenIndexes = (v: unknown, i: number) =>\n        !forbiddenLabelsIndexes.hasOwnProperty(i);\n\n      filteredLabels = filteredLabels.filter(filterOutForbiddenIndexes);\n\n      const filteredGroups = groups.map((g) => ({\n        title: g.title,\n        values: g.values.filter(filterOutForbiddenIndexes),\n      }));\n\n      chart.groups = filteredGroups;\n      chart.labels = filteredLabels;\n    });\n\n    const filteredCharts = charts.filter(\n      (v: unknown, i: number) => !forbiddenChartsIndexes.hasOwnProperty(i)\n    );\n\n    return (\n      <Bar\n        maxLabelsCount={maxLabelsCount}\n        charts={filteredCharts}\n        {...otherProps}\n      />\n    );\n  }\n}\n\nexport default BarContainer;\n","import BarContainer from \"./Bar.container\";\nexport default BarContainer;\n"],"sourceRoot":""}